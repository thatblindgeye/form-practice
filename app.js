!function(){"use strict";const e=document.querySelector("#theme-switch"),t=t=>{"light"===document.documentElement.getAttribute("theme")?(e.setAttribute("aria-checked","false"),document.documentElement.setAttribute("theme","dark")):(e.setAttribute("aria-checked","true"),document.documentElement.setAttribute("theme","light"))},r={email:/^(\w*)(\.)?(\w*)@([A-Za-z]*)(\.([A-Za-z]{1,})){1,}$/,country:/^([a-z]+\s*){1,}$/i,zipcode:/^\d{5}$/,password:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{10,}$/},n=e=>{"false"===e.target.getAttribute("aria-pressed")?(e.target.setAttribute("aria-pressed","true"),e.target.textContent="visibility",e.target.previousElementSibling.type="text"):(e.target.setAttribute("aria-pressed","false"),e.target.textContent="visibility_off",e.target.previousElementSibling.type="password")},i=document.querySelector("#email"),s=document.querySelector("#country"),a=document.querySelector("#zipcode"),l=document.querySelector("#password"),o=document.querySelector("#confirm-password"),u=document.querySelector("#submit-error"),d=e=>{const{email:t,country:n,zipcode:u,password:d}=r;return e.target!==i&&"submit"!==e.type||t.test(i.value)?(t.test(i.value)&&m(i),e.target!==s&&"submit"!==e.type||n.test(s.value)?(n.test(s.value)&&m(s),e.target!==a&&"submit"!==e.type||u.test(a.value)?(u.test(a.value)&&m(a),e.target!==l&&"submit"!==e.type||d.test(l.value)?(d.test(l.value)&&m(l.parentElement),e.target!==o&&"submit"!==e.type||o.value===l.value?(m(o.parentElement),!0):(c(o.parentElement),!1)):(c(l.parentElement),!1)):(c(a),!1)):(c(s),!1)):(c(i),!1)},c=e=>{e.classList.add("invalid"),e.nextElementSibling.style.display="inline-block"},m=e=>{e.classList.remove("invalid"),e.nextElementSibling.style.display="none"},y=e=>{"submit"!==e.type||d(e)||(u.style.display="inline-block"),"blur"===e.type&&(u.style.display="none")},p=document.querySelector("#main");t(),e.addEventListener("click",t),e.addEventListener("keydown",(e=>{" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),t())})),(()=>{const e=document.querySelectorAll(".password-visibility");Array.from(e).forEach((e=>{e.addEventListener("click",(e=>{n(e)}))})),Array.from(e).forEach((e=>{e.addEventListener("keydown",(e=>{" "!==e.key&&"Enter"!==e.key||n(e)}))}));const t=document.querySelectorAll('input:not([type="submit"])');Array.from(t).forEach((e=>{e.addEventListener("blur",d)})),document.querySelector("#submit-button").addEventListener("blur",y),document.querySelector("form").addEventListener("submit",(e=>{e.preventDefault(),y(e),d(e)&&(()=>{for(;p.lastChild;)p.removeChild(p.lastChild);const e=document.createElement("h2");e.className="form-success",e.innerText="You've submitted a valid form!",p.appendChild(e),document.documentElement.scrollTop=0})()}))})()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90ZW1wbGF0ZS8uL3NyYy9zaXRlLXNldHRpbmdzLmpzIiwid2VicGFjazovL3RlbXBsYXRlLy4vc3JjL2Zvcm0uanMiLCJ3ZWJwYWNrOi8vdGVtcGxhdGUvLi9zcmMvaW5kZXguanMiXSwibmFtZXMiOlsidGhlbWVTd2l0Y2giLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ0b2dnbGVUaGVtZSIsImUiLCJkb2N1bWVudEVsZW1lbnQiLCJnZXRBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJyZWdleCIsImVtYWlsIiwiY291bnRyeSIsInppcGNvZGUiLCJwYXNzd29yZCIsInRvZ2dsZVBhc3N3b3JkVmlzaWJpbGl0eSIsInRhcmdldCIsInRleHRDb250ZW50IiwicHJldmlvdXNFbGVtZW50U2libGluZyIsInR5cGUiLCJlbWFpbElucHV0IiwiY291bnRyeUlucHV0IiwiemlwSW5wdXQiLCJwYXNzd29yZElucHV0IiwiY29uZmlybVBhc3N3b3JkIiwic3VibWl0RXJyb3IiLCJ2YWxpZGF0ZUZpZWxkcyIsInRlc3QiLCJ2YWx1ZSIsInJlbW92ZUZvcm1FcnJvciIsInBhcmVudEVsZW1lbnQiLCJhZGRGb3JtRXJyb3IiLCJjbGFzc0xpc3QiLCJhZGQiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJzdHlsZSIsImRpc3BsYXkiLCJyZW1vdmUiLCJ0b2dnbGVTdWJtaXRFcnJvciIsIm1haW4iLCJhZGRFdmVudExpc3RlbmVyIiwia2V5IiwicHJldmVudERlZmF1bHQiLCJwYXNzd29yZEljb25zIiwicXVlcnlTZWxlY3RvckFsbCIsIkFycmF5IiwiZnJvbSIsImZvckVhY2giLCJpY29uIiwiZmllbGRzIiwiZmllbGQiLCJsYXN0Q2hpbGQiLCJyZW1vdmVDaGlsZCIsImhlYWRpbmciLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwiaW5uZXJUZXh0IiwiYXBwZW5kQ2hpbGQiLCJzY3JvbGxUb3AiLCJzdWJtaXRWYWxpZEZvcm0iXSwibWFwcGlu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QUtSLGlCQUFpQixTQUFVbEMsSUFDOUJTLEVBQXlCVCxTQUk3QnVDLE1BQU1DLEtBQUtILEdBQWVJLFNBQVFDLElBQ2hDQSxFQUFLUixpQkFBaUIsV0FBWWxDLElBQ2xCLE1BQVZBLEVBQUVtQyxLQUF5QixVQUFWbkMsRUFBRW1DLEtBQ3JCMUIsRUFBeUJULFNBSy9CLE1BQU0yQyxFQUFTOUMsU0FBU3lDLGlCQUFpQiw4QkFDekNDLE1BQU1DLEtBQUtHLEdBQVFGLFNBQVFHLElBQ3pCQSxFQUFNVixpQkFBaUIsT0FBUWQsTUFHakN2QixTQUFTQyxjQUFjLGtCQUFrQm9DLGlCQUFpQixPQUFRRixHQUVyRG5DLFNBQVNDLGNBQWMsUUFDL0JvQyxpQkFBaUIsVUFBV2xDLElBQy9CQSxFQUFFb0MsaUJBQ0ZKLEVBQWtCaEMsR0FDZG9CLEVBQWVwQixJRHdEQyxNQUN0QixLQUFPaUMsRUFBS1ksV0FDVlosRUFBS2EsWUFBWWIsRUFBS1ksV0FFeEIsTUFBTUUsRUFBVWxELFNBQVNtRCxjQUFjLE1BQ3ZDRCxFQUFRRSxVQUFZLGVBQ3BCRixFQUFRRyxVQUFZLGlDQUNwQmpCLEVBQUtrQixZQUFZSixHQUNqQmxELFNBQVNJLGdCQUFnQm1ELFVBQVksR0MvRGpDQyxPQTVCYSxHIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG4gIGNvbnN0IHRoZW1lU3dpdGNoID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0aGVtZS1zd2l0Y2hcIik7XG5cbiAgY29uc3QgZGFya1RoZW1lID0gKCkgPT4ge1xuICAgIHRoZW1lU3dpdGNoLnNldEF0dHJpYnV0ZShcImFyaWEtY2hlY2tlZFwiLCBcImZhbHNlXCIpO1xuICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJ0aGVtZVwiLCBcImRhcmtcIik7XG4gIH07XG5cbiAgY29uc3QgbGlnaHRUaGVtZSA9ICgpID0+IHtcbiAgICB0aGVtZVN3aXRjaC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWNoZWNrZWRcIiwgXCJ0cnVlXCIpO1xuICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJ0aGVtZVwiLCBcImxpZ2h0XCIpO1xuICB9O1xuXG4gIGNvbnN0IHRvZ2dsZVRoZW1lID0gKGUpID0+IHtcbiAgICBpZiAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmdldEF0dHJpYnV0ZShcInRoZW1lXCIpID09PSBcImxpZ2h0XCIpIHtcbiAgICAgIGRhcmtUaGVtZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsaWdodFRoZW1lKCk7XG4gICAgfTtcbiAgfTtcblxuXG5leHBvcnQge3RvZ2dsZVRoZW1lLCB0aGVtZVN3aXRjaH0iLCJcInVzZSBzdHJpY3RcIjtcblxuY29uc3QgcmVnZXggPSB7XG4gIGVtYWlsOiAvXihcXHcqKShcXC4pPyhcXHcqKUAoW0EtWmEtel0qKShcXC4oW0EtWmEtel17MSx9KSl7MSx9JC8sXG4gIGNvdW50cnk6IC9eKFthLXpdK1xccyopezEsfSQvaSxcbiAgemlwY29kZTogL15cXGR7NX0kLyxcbiAgcGFzc3dvcmQ6IC9eKD89LipbYS16XSkoPz0uKltBLVpdKSg/PS4qXFxkKVthLXpBLVpcXGRdezEwLH0kLyxcbn07XG5cbmNvbnN0IHRvZ2dsZVBhc3N3b3JkVmlzaWJpbGl0eSA9IChlKSA9PiB7XG4gIGlmIChlLnRhcmdldC5nZXRBdHRyaWJ1dGUoXCJhcmlhLXByZXNzZWRcIikgPT09IFwiZmFsc2VcIikge1xuICAgIGUudGFyZ2V0LnNldEF0dHJpYnV0ZShcImFyaWEtcHJlc3NlZFwiLCBcInRydWVcIik7XG4gICAgZS50YXJnZXQudGV4dENvbnRlbnQgPSBcInZpc2liaWxpdHlcIjtcbiAgICBlLnRhcmdldC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLnR5cGUgPSBcInRleHRcIjtcbiAgfSBlbHNlIHtcbiAgICBlLnRhcmdldC5zZXRBdHRyaWJ1dGUoXCJhcmlhLXByZXNzZWRcIiwgXCJmYWxzZVwiKTtcbiAgICBlLnRhcmdldC50ZXh0Q29udGVudCA9IFwidmlzaWJpbGl0eV9vZmZcIjtcbiAgICBlLnRhcmdldC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLnR5cGUgPSBcInBhc3N3b3JkXCI7XG4gIH1cbn07XG5cbmNvbnN0IGVtYWlsSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VtYWlsXCIpO1xuY29uc3QgY291bnRyeUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjb3VudHJ5XCIpO1xuY29uc3QgemlwSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3ppcGNvZGVcIik7XG5jb25zdCBwYXNzd29yZElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwYXNzd29yZFwiKTtcbmNvbnN0IGNvbmZpcm1QYXNzd29yZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY29uZmlybS1wYXNzd29yZFwiKTtcbmNvbnN0IHN1Ym1pdEVycm9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNzdWJtaXQtZXJyb3JcIik7XG5cbmNvbnN0IHZhbGlkYXRlRmllbGRzID0gKGUpID0+IHtcbiAgY29uc3QgeyBlbWFpbCwgY291bnRyeSwgemlwY29kZSwgcGFzc3dvcmQgfSA9IHJlZ2V4O1xuXG4gIGlmICgoZS50YXJnZXQgPT09IGVtYWlsSW5wdXQgfHwgZS50eXBlID09PSBcInN1Ym1pdFwiKSAmJiBcbiAgICAgICFlbWFpbC50ZXN0KGVtYWlsSW5wdXQudmFsdWUpKSBcbiAge1xuICAgIGFkZEZvcm1FcnJvcihlbWFpbElucHV0KTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH0gZWxzZSBpZiAoZW1haWwudGVzdChlbWFpbElucHV0LnZhbHVlKSkge1xuICAgIHJlbW92ZUZvcm1FcnJvcihlbWFpbElucHV0KTtcbiAgfVxuXG4gIGlmICgoZS50YXJnZXQgPT09IGNvdW50cnlJbnB1dCB8fCBlLnR5cGUgPT09IFwic3VibWl0XCIpICYmXG4gICAgIWNvdW50cnkudGVzdChjb3VudHJ5SW5wdXQudmFsdWUpKSBcbiAge1xuICAgIGFkZEZvcm1FcnJvcihjb3VudHJ5SW5wdXQpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfSBlbHNlIGlmIChjb3VudHJ5LnRlc3QoY291bnRyeUlucHV0LnZhbHVlKSkge1xuICAgIHJlbW92ZUZvcm1FcnJvcihjb3VudHJ5SW5wdXQpO1xuICB9XG5cbiAgaWYgKChlLnRhcmdldCA9PT0gemlwSW5wdXQgfHwgZS50eXBlID09PSBcInN1Ym1pdFwiKSAmJlxuICAgICF6aXBjb2RlLnRlc3QoemlwSW5wdXQudmFsdWUpKSBcbiAge1xuICAgIGFkZEZvcm1FcnJvcih6aXBJbnB1dCk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9IGVsc2UgaWYgKHppcGNvZGUudGVzdCh6aXBJbnB1dC52YWx1ZSkpIHtcbiAgICByZW1vdmVGb3JtRXJyb3IoemlwSW5wdXQpO1xuICB9XG5cbiAgaWYgKChlLnRhcmdldCA9PT0gcGFzc3dvcmRJbnB1dCB8fCBlLnR5cGUgPT09IFwic3VibWl0XCIpICYmXG4gICAgIXBhc3N3b3JkLnRlc3QocGFzc3dvcmRJbnB1dC52YWx1ZSkpIFxuICB7XG4gICAgYWRkRm9ybUVycm9yKHBhc3N3b3JkSW5wdXQucGFyZW50RWxlbWVudCk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9IGVsc2UgaWYgKHBhc3N3b3JkLnRlc3QocGFzc3dvcmRJbnB1dC52YWx1ZSkpIHtcbiAgICByZW1vdmVGb3JtRXJyb3IocGFzc3dvcmRJbnB1dC5wYXJlbnRFbGVtZW50KTtcbiAgfVxuXG4gIGlmICgoZS50YXJnZXQgPT09IGNvbmZpcm1QYXNzd29yZCB8fCBlLnR5cGUgPT09IFwic3VibWl0XCIpICYmXG4gICAgY29uZmlybVBhc3N3b3JkLnZhbHVlICE9PSBwYXNzd29yZElucHV0LnZhbHVlKSBcbiAge1xuICAgIGFkZEZvcm1FcnJvcihjb25maXJtUGFzc3dvcmQucGFyZW50RWxlbWVudCk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9IGVsc2Uge1xuICAgIHJlbW92ZUZvcm1FcnJvcihjb25maXJtUGFzc3dvcmQucGFyZW50RWxlbWVudCk7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn07XG5cbmNvbnN0IGFkZEZvcm1FcnJvciA9ICh0YXJnZXQpID0+IHtcbiAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJpbnZhbGlkXCIpO1xuICB0YXJnZXQubmV4dEVsZW1lbnRTaWJsaW5nLnN0eWxlLmRpc3BsYXkgPSBcImlubGluZS1ibG9ja1wiO1xufTtcblxuY29uc3QgcmVtb3ZlRm9ybUVycm9yID0gKHRhcmdldCkgPT4ge1xuICB0YXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImludmFsaWRcIik7XG4gIHRhcmdldC5uZXh0RWxlbWVudFNpYmxpbmcuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xufTtcblxuY29uc3QgdG9nZ2xlU3VibWl0RXJyb3IgPSAoZSkgPT4ge1xuICBpZiAoZS50eXBlID09PSBcInN1Ym1pdFwiICYmICF2YWxpZGF0ZUZpZWxkcyhlKSkge1xuICAgIHN1Ym1pdEVycm9yLnN0eWxlLmRpc3BsYXkgPSBcImlubGluZS1ibG9ja1wiO1xuICB9O1xuICAvLyBjbGVhciBlcnJvciBzbyBzY3JlZW4gcmVhZGVyIGFubm91bmNlcyBvbiBzdWJzZXF1ZW50IGludmFsaWQgc3VibWlzc2lvbnNcbiAgaWYgKGUudHlwZSA9PT0gXCJibHVyXCIpIHtcbiAgICBzdWJtaXRFcnJvci5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gIH1cbn1cblxuY29uc3QgbWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbWFpblwiKTtcbmNvbnN0IHN1Ym1pdFZhbGlkRm9ybSA9ICgpID0+IHtcbiAgd2hpbGUgKG1haW4ubGFzdENoaWxkKSB7XG4gICAgbWFpbi5yZW1vdmVDaGlsZChtYWluLmxhc3RDaGlsZCk7XG4gIH1cbiAgY29uc3QgaGVhZGluZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoMlwiKTtcbiAgaGVhZGluZy5jbGFzc05hbWUgPSBcImZvcm0tc3VjY2Vzc1wiO1xuICBoZWFkaW5nLmlubmVyVGV4dCA9IFwiWW91J3ZlIHN1Ym1pdHRlZCBhIHZhbGlkIGZvcm0hXCI7XG4gIG1haW4uYXBwZW5kQ2hpbGQoaGVhZGluZyk7XG4gIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgPSAwO1xufTtcblxuZXhwb3J0IHsgdG9nZ2xlUGFzc3dvcmRWaXNpYmlsaXR5LCB2YWxpZGF0ZUZpZWxkcywgc3VibWl0VmFsaWRGb3JtLCB0b2dnbGVTdWJtaXRFcnJvciB9O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCAnLi9zdHlsZS5jc3MnO1xuaW1wb3J0IHt0b2dnbGVUaGVtZSwgdGhlbWVTd2l0Y2h9IGZyb20gXCIuL3NpdGUtc2V0dGluZ3NcIjtcbmltcG9ydCB7dG9nZ2xlUGFzc3dvcmRWaXNpYmlsaXR5LCB2YWxpZGF0ZUZpZWxkcywgc3VibWl0VmFsaWRGb3JtLCB0b2dnbGVTdWJtaXRFcnJvcn0gZnJvbSBcIi4vZm9ybVwiO1xuXG5jb25zdCBzaXRlVGhlbWUgPSAoKCkgPT4ge1xuICB0b2dnbGVUaGVtZSgpO1xuICB0aGVtZVN3aXRjaC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdG9nZ2xlVGhlbWUpO1xuICB0aGVtZVN3aXRjaC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZSkgPT4ge1xuICAgIGlmIChlLmtleSA9PT0gXCIgXCIgfHwgZS5rZXkgPT09IFwiRW50ZXJcIikge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdG9nZ2xlVGhlbWUoKTtcbiAgICB9O1xuICB9KTtcbn0pKCk7XG5cbmNvbnN0IGZvcm1FdmVudHMgPSAoKCkgPT4ge1xuICBjb25zdCBwYXNzd29yZEljb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wYXNzd29yZC12aXNpYmlsaXR5XCIpO1xuICBBcnJheS5mcm9tKHBhc3N3b3JkSWNvbnMpLmZvckVhY2goaWNvbiA9PiB7XG4gICAgaWNvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgIHRvZ2dsZVBhc3N3b3JkVmlzaWJpbGl0eShlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgQXJyYXkuZnJvbShwYXNzd29yZEljb25zKS5mb3JFYWNoKGljb24gPT4ge1xuICAgIGljb24uYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGUpID0+IHtcbiAgICAgIGlmIChlLmtleSA9PT0gXCIgXCIgfHwgZS5rZXkgPT09IFwiRW50ZXJcIikge1xuICAgICAgICB0b2dnbGVQYXNzd29yZFZpc2liaWxpdHkoZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIGNvbnN0IGZpZWxkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0Om5vdChbdHlwZT1cInN1Ym1pdFwiXSknKTtcbiAgQXJyYXkuZnJvbShmaWVsZHMpLmZvckVhY2goZmllbGQgPT4ge1xuICAgIGZpZWxkLmFkZEV2ZW50TGlzdGVuZXIoXCJibHVyXCIsIHZhbGlkYXRlRmllbGRzKVxuICB9KVxuXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjc3VibWl0LWJ1dHRvblwiKS5hZGRFdmVudExpc3RlbmVyKFwiYmx1clwiLCB0b2dnbGVTdWJtaXRFcnJvcik7XG5cbiAgY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJmb3JtXCIpO1xuICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgdG9nZ2xlU3VibWl0RXJyb3IoZSk7XG4gICAgaWYgKHZhbGlkYXRlRmllbGRzKGUpKSB7XG4gICAgICBzdWJtaXRWYWxpZEZvcm0oKTtcbiAgICB9XG4gIH0pXG59KSgpOyJdLCJzb3VyY2VSb290IjoiIn0=